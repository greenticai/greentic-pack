// SPDX-License-Identifier: MIT

// ------------------------------------------------------------
// DEPRECATED
//
// This package is deprecated and kept for backward compatibility.
//
// Reason:
//   Superseded by the CBOR-based, self-describing model.
//
// Replacement:
//   greentic:pack@0.6.0
//
// Status:
//   No new development. No new versions will be published.
// ------------------------------------------------------------
// SPDX-License-Identifier: MIT

package greentic:pack-export@0.4.0;

/// discovery-related queries exposed by packs
interface pack-queries {
  use greentic:types-core/types@0.4.0.{flow-id, flow-info, schema-doc, iface-error};
  use greentic:interfaces-types/types@0.1.0.{tenant-ctx, tenant-id, team-id, user-id};

  list-flows: func() -> result<list<flow-info>, iface-error>;
  get-flow-schema: func(flow: flow-id) -> result<schema-doc, iface-error>;
  /// opaque JSON metadata blob
  flow-metadata: func(flow: flow-id) -> result<string, iface-error>;
}

/// execution lifecycle APIs exposed by packs
interface pack-exec {
  use greentic:types-core/types@0.4.0.{flow-id, run-opts, run-result, iface-error};

  run-flow: func(flow: flow-id, input-json: string, opts: option<run-opts>)
    -> result<run-result, iface-error>;
  prepare-flow: func(flow: flow-id, hints-json: option<string>) -> result<string, iface-error>;
}

/// A2A search capabilities
interface pack-a2a {
  use greentic:types-core/types@0.4.0.{a2a-candidate, iface-error};

  a2a-search: func(model: string, query-embedding: list<f32>, k: u32)
    -> result<list<a2a-candidate>, iface-error>;
}

world pack-exports {
  export pack-queries;
  export pack-exec;
  export pack-a2a;
}
