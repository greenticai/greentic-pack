# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
name = "greentic-distributor-client"
version = "0.4.29"
build = false
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "WIT-based client for the greentic:distributor-api@1.0.0 distributor resolver."
homepage = "https://gihub.com/greentic"
readme = "README.md"
keywords = [
    "greentic",
    "distributor",
    "wasm",
    "wit",
]
categories = [
    "network-programming",
    "wasm",
]
license = "MIT"
repository = "https://github.com/greentic/greentic-distributor-client"
resolver = "2"

[features]
default = ["dist-cli"]
dist-cli = [
    "clap",
    "dist-client",
    "pack-fetch",
]
dist-client = [
    "oci-components",
    "reqwest",
    "pack-fetch",
]
fixture-resolver = ["dist-client"]
http-runtime = ["reqwest"]
oci-components = [
    "dirs-next",
    "oci-distribution",
    "sha2",
]
pack-fetch = [
    "dirs-next",
    "oci-distribution",
    "sha2",
]
runner-api = [
    "dirs-next",
    "oci-distribution",
    "sha2",
]

[lib]
name = "greentic_distributor_client"
path = "src/lib.rs"

[[bin]]
name = "greentic-dist"
path = "src/bin/greentic-dist.rs"
required-features = ["dist-cli"]

[[bin]]
name = "greentic-distributor-client"
path = "src/bin/greentic-distributor-client.rs"
required-features = ["dist-cli"]

[[test]]
name = "dist_cli"
path = "tests/dist_cli.rs"

[[test]]
name = "dist_client"
path = "tests/dist_client.rs"

[[test]]
name = "http_client"
path = "tests/http_client.rs"

[[test]]
name = "oci_components"
path = "tests/oci_components.rs"

[[test]]
name = "oci_components_e2e"
path = "tests/oci_components_e2e.rs"

[[test]]
name = "oci_packs"
path = "tests/oci_packs.rs"

[[test]]
name = "pack_cli_parity"
path = "tests/pack_cli_parity.rs"

[[test]]
name = "wit_client"
path = "tests/wit_client.rs"

[dependencies.anyhow]
version = "1"

[dependencies.async-trait]
version = "0.1"

[dependencies.clap]
version = "4"
features = ["derive"]
optional = true

[dependencies.dirs-next]
version = "2"
optional = true

[dependencies.greentic-config-types]
version = "0.4"

[dependencies.greentic-interfaces-guest]
version = "0.4"
features = [
    "distributor-api",
    "distributor-api-imports",
]
default-features = false

[dependencies.greentic-types]
version = "0.4"
features = ["schema"]

[dependencies.oci-distribution]
version = "0.11"
features = ["rustls-tls"]
optional = true
default-features = false

[dependencies.reqwest]
version = "0.13"
features = [
    "json",
    "query",
    "rustls",
]
optional = true
default-features = false

[dependencies.semver]
version = "1"

[dependencies.serde]
version = "1"
features = ["derive"]

[dependencies.serde_json]
version = "1"

[dependencies.sha2]
version = "0.10"
optional = true

[dependencies.thiserror]
version = "2"

[dependencies.tokio]
version = "1"
features = [
    "macros",
    "rt-multi-thread",
]

[dev-dependencies.assert_cmd]
version = "2"

[dev-dependencies.httpmock]
version = "0.8"

[dev-dependencies.tempfile]
version = "3"
